<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SOS Mechanics – Instant Quote</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#f5f5f5;
  color:#000;
  padding:20px;
}
h1{
  color:#39FF14;
  border-bottom:3px solid #39FF14;
  padding-bottom:8px;
}
.section{
  background:#eaeaea;
  border:1px solid #39FF14;
  padding:15px;
  margin-top:15px;
}
label{
  display:block;
  margin-top:12px;
  font-weight:bold;
}
input, select{
  width:100%;
  padding:8px;
  margin-top:5px;
}
#total{
  font-size:26px;
  font-weight:bold;
  color:#39FF14;
  text-align:center;
  margin-top:20px;
}
button{
  background:#39FF14;
  border:none;
  padding:12px;
  font-size:16px;
  width:100%;
  cursor:pointer;
  margin-top:15px;
}
.small-btn{
  width:auto;
  padding:4px 8px;
  font-size:12px;
  margin-left:10px;
}
</style>
</head>
<body>

<h1>SOS Mechanics – Instant Quote</h1>

<div class="section">
  <p id="dateTime"></p>
  <p>
    <span id="locationText">Location: Not set</span>
    <button class="small-btn" id="locBtn">Auto-locate</button>
  </p>
</div>

<div class="section">
  <label>Customer Name / Registration</label>
  <input type="text" id="customerName" placeholder="Name or number plate">

  <label>Contact Number</label>
  <input type="text" id="contact" placeholder="Phone number">

  <label>Vehicle Type</label>
  <select id="vehicleType" onchange="updateTotal()">
    <option value="" selected disabled>Select vehicle type</option>
    <option value="car">Car</option>
    <option value="van">Van / Commercial</option>
  </select>

  <label>Engine Size</label>
  <select id="engineSize" onchange="updateTotal()">
    <option value="" selected disabled>Select engine size</option>
    <option value="1.6">Up to 2.0L</option>
    <option value="2.3">Above 2.0L</option>
  </select>

  <label>Job</label>
  <select id="jobSelect" onchange="updateTotal()">
    <option value="" selected disabled>Select job</option>
    <option value="clutch">Clutch Replacement</option>
    <option value="starter">Starter Motor Replacement</option>
    <option value="brakes">Brake Pads / Discs</option>
    <option value="suspension">Suspension / Steering</option>
    <option value="diagnostics">Diagnostics / ECU</option>
    <option value="battery">Battery / Electrical</option>
  </select>

  <label>Parts Supplied By</label>
  <select id="partsSource" onchange="updateTotal()">
    <option value="" selected disabled>Select option</option>
    <option value="customer">Customer Supplied</option>
    <option value="sos">SOS Supplied</option>
  </select>

  <label>
    <input type="checkbox" id="conditions" onchange="updateTotal()">
    Night / difficult conditions (+15%)
  </label>

  <label>
    <input type="checkbox" id="emergency" onchange="updateTotal()">
    Weekend / emergency (+25%)
  </label>
</div>

<div id="total">Total: £0 (+ parts)</div>

<button onclick="window.print()">Download / Save Quote</button>

<script>
// Date & time
document.getElementById("dateTime").innerText =
  "Quote generated: " + new Date().toLocaleString();

// Auto-location button
document.getElementById("locBtn").onclick = () => {
  if(!navigator.geolocation){
    locationText.innerText = "Location: Not supported";
    return;
  }
  locationText.innerText = "Location: locating…";
  navigator.geolocation.getCurrentPosition(
    pos => {
      locationText.innerText =
        "Location: " +
        pos.coords.latitude.toFixed(4) + ", " +
        pos.coords.longitude.toFixed(4);
    },
    () => locationText.innerText = "Location: denied"
  );
};

// Base pricing logic
function getBasePrice(job, engine){
  if(job === "clutch") return engine <= 2 ? 300 : 450;
  if(job === "starter") return engine <= 2 ? 150 : 250;
  if(job === "brakes") return 120;
  if(job === "suspension") return 180;
  if(job === "diagnostics") return 80;
  if(job === "battery") return 70;
  return 0;
}

// Update total
function updateTotal(){
  let vehicle = document.getElementById("vehicleType").value;
  let engine = parseFloat(document.getElementById("engineSize").value);
  let job = document.getElementById("jobSelect").value;

  if(!vehicle || !engine || !job){
    document.getElementById("total").innerText = "Total: £0 (+ parts)";
    return;
  }

  let total = getBasePrice(job, engine);

  // Van multiplier
  if(vehicle === "van") total *= 1.15;

  if(document.getElementById("conditions").checked) total *= 1.15;
  if(document.getElementById("emergency").checked) total *= 1.25;

  document.getElementById("total").innerText =
    "Total: £" + total.toFixed(2) + " (+ parts)";
}
</script>

</body>
</html>